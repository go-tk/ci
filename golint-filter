#!/usr/bin/env bash

set -euo pipefail

exit_code=0
while read suggestion; do
	if [[ ${suggestion} =~ ^(.*/)?internal/.*\.go: ]]; then
		echo "${suggestion}"
		# go file in internal package
		if [[ ${suggestion} =~ exported\ .*\ should\ have\ comment\ or\ be\ unexported ]]; then
			# ignore this suggestion
			continue
		fi
	fi
	echo "${suggestion}"
	exit_code=1
done
exit ${exit_code}
